function FadeActionParams(a) { FadeActionParams.prototype.viewName = "Fade", this.binded = a, this.add("duration", 1e3), this.add("ease", "none"), this.add("easePower", 1), this.add("delay", 0), this.add("loopTimes", 0), this.add("loopForever", "false") } function ShowHideActionParams(a) { this.binded = a, this.add("delay", 0) } function MotionActionParams(a) { MotionActionParams.prototype.viewName = "Motion", this.binded = a, this.add("startX", 0), this.add("startY", 0), this.add("endX", 0), this.add("endY", 0), this.add("duration", 2e3), this.add("delay", 0), this.add("ease", "none"), this.add("easePower", 1), this.add("loopTimes", 0), this.add("loopForever", "false") } function RotateActionParams(a) { RotateActionParams.prototype.viewName = "Rotate", this.binded = a, this.add("degree", 1), this.add("direction", "1"), this.add("duration", 1e3), this.add("delay", 0), this.add("ease", "none"), this.add("easePower", 1), this.add("loopTimes", 0), this.add("loopForever", "false") } function ScaleActionParams(a) { ScaleActionParams.prototype.viewName = "Scale", this.binded = a, this.add("scale", 1), this.add("duration", 1e3), this.add("delay", 0), this.add("ease", "none"), this.add("easePower", 1), this.add("loopTimes", 0), this.add("loopForever", "false") } function AnimActionHandler() { AnimActionHandler.prototype.targetable = !0 } function FadeInActionHandler() { FadeInActionHandler.prototype.id = "fadeIn", FadeInActionHandler.prototype.displayName = "Fade In", FadeInActionHandler.prototype.param = FadeActionParams } function FadeOutActionHandler() { FadeOutActionHandler.prototype.id = "fadeOut", FadeOutActionHandler.prototype.displayName = "Fade Out", FadeOutActionHandler.prototype.param = FadeActionParams } function ShowActionHandler() { ShowActionHandler.prototype.id = "show", ShowActionHandler.prototype.displayName = "Show", ShowActionHandler.prototype.param = ShowHideActionParams } function HideActionHandler() { HideActionHandler.prototype.id = "hide", HideActionHandler.prototype.displayName = "Hide", HideActionHandler.prototype.param = ShowHideActionParams } function MotionActionHandler() { MotionActionHandler.prototype.id = "motion", MotionActionHandler.prototype.displayName = "Motion", MotionActionHandler.prototype.param = MotionActionParams } function SlideInActionHandler() { SlideInActionHandler.prototype.id = "slideIn", SlideInActionHandler.prototype.displayName = "Slide In", SlideInActionHandler.prototype.param = MotionActionParams } function SlideOutActionHandler() { SlideOutActionHandler.prototype.id = "slideOut", SlideOutActionHandler.prototype.displayName = "Slide Out", SlideOutActionHandler.prototype.param = MotionActionParams } function ScaleActionHandler() { ScaleActionHandler.prototype.id = "scale", ScaleActionHandler.prototype.displayName = "Scale", ScaleActionHandler.prototype.param = ScaleActionParams } function RotateActionHandler() { RotateActionHandler.prototype.id = "rotate", RotateActionHandler.prototype.displayName = "Rotate", RotateActionHandler.prototype.param = RotateActionParams } function SocialActionParams(a) { this.binded = a, this.add("delay", 0) } function GetFeedDataActionHandler() { GetFeedDataActionHandler.prototype.id = "getFeedData", GetFeedDataActionHandler.prototype.displayName = "Get Feed Data", GetFeedDataActionHandler.prototype.param = SocialActionParams, GetFeedDataActionHandler.prototype.targetable = !0 } function Action() { this.actionId = "", this.actionParams = null, this.actionHandler = null, this.actionTarget = "", this.actionSelf = null, this.actionRef = null, this.actionLoopDetails = null, this.executed = !1 } function Interaction() { this.interactionId = "", this.eventId = "", this.actions = [], this.loopDDvalue = Interaction.eLoopTimes.ONCE, this.loopTimes = 0, this.totalDuration = 0, this.loopTracker = { countIterations: 0, numOfEndedActions: 0 }, this.status = Interaction.state.STOPPED } FadeActionParams.prototype = new ActionParams("1.0.0"), FadeActionParams.prototype.constructor = FadeActionParams, FadeActionParams.prototype.validate = function () { var a = this.get("ease"), b = this.get("easePower"), c = this.get("loopTimes"), d = this.get("loopForever"); return this.get("duration") >= 0 && this.get("delay") >= 0 && ("none" === a || "easeIn" === a || "easeOut" === a || "easeInOut" === a) && b >= 1 && 4 >= b && ("false" === d && c >= 0 && 99 >= c || "true" === d) }, ShowHideActionParams.prototype = new ActionParams("1.0.0"), ShowHideActionParams.prototype.constructor = ShowHideActionParams, ShowHideActionParams.prototype.validate = function () { return this.get("delay") >= 0 }, MotionActionParams.prototype = new ActionParams("1.0.0"), MotionActionParams.prototype.constructor = MotionActionParams, MotionActionParams.prototype.validate = function () { var a = this.get("ease"), b = this.get("easePower"), c = this.get("loopTimes"), d = this.get("loopForever"); return void 0 !== this.get("startX") && void 0 !== this.get("startY") && void 0 !== this.get("endX") && void 0 !== this.get("endY") && this.get("duration") >= 0 && this.get("delay") >= 0 && ("none" === a || "easeIn" === a || "easeOut" === a || "easeInOut" === a) && b >= 1 && 4 >= b && ("false" === d && c >= 0 && 99 >= c || "true" === d) }, RotateActionParams.prototype = new ActionParams("1.0.0"), RotateActionParams.prototype.constructor = RotateActionParams, RotateActionParams.prototype.validate = function () { var a = this.get("ease"), b = this.get("easePower"), c = this.get("degree"), d = this.get("loopTimes"), e = this.get("loopForever"); return this.get("duration") >= 0 && this.get("delay") >= 0 && (0 > c || c > 9999 || "none" === a || "easeIn" === a || "easeOut" === a || "easeInOut" === a) && b >= 1 && 4 >= b && ("false" === e && d >= 0 && 99 >= d || "true" === e) }, ScaleActionParams.prototype = new ActionParams("1.0.0"), ScaleActionParams.prototype.constructor = ScaleActionParams, ScaleActionParams.prototype.validate = function () { var a = this.get("ease"), b = this.get("easePower"), c = this.get("scale"), d = this.get("loopTimes"), e = this.get("loopForever"); return this.get("duration") >= 0 && this.get("delay") >= 0 && (0 > c || c > 1e3 || "none" === a || "easeIn" === a || "easeOut" === a || "easeInOut" === a) && b >= 1 && 4 >= b && ("false" === e && d >= 0 && 99 >= d || "true" === e) }, AnimActionHandler.prototype = new ActionHandler, AnimActionHandler.prototype.targetStateMap = {}, AnimActionHandler.prototype.offsetX = 0, AnimActionHandler.prototype.offsetY = 0, AnimActionHandler.prototype.init = function (a, b, c, d) { AnimActionHandler.prototype.offsetX = c, AnimActionHandler.prototype.offsetY = d }, AnimActionHandler.prototype.prepare = function (a, b) { if (b && (!this.targetStateMap.hasOwnProperty(b) || this.targetStateMap[b].cleared)) { var c = {}; c.cleared = !1; var d = $("#" + b); c.inProgress = 0, c.opacity = d.css("opacity"), c.position = { top: d[0].style.top, left: d[0].style.left }, c.visibility = d.css("visibility"); var e = $("#" + b + " video"); null !== e && (c.controls = e.attr("controls")), c.rotation = 0, c.scale = 1, c.originState = $.extend(!0, {}, c), this.targetStateMap[b] = c } }, AnimActionHandler.prototype.getAnimParams = function (a) { return { overwrite: 0, onStart: this.onStartHandler, onStartParams: [this, a], onComplete: this.onCompleteHandler, onCompleteParams: [this, a] } }, AnimActionHandler.prototype.onStartHandler = function (a, b) { if (0 === a.targetStateMap[b].inProgress) { var c = $("#" + b + " video"); null !== c && c.attr("controls", null) } a.targetStateMap[b].inProgress++ }, AnimActionHandler.prototype.onCompleteHandler = function (a, b, c) { var d = b.getActionTarget(); if (1 === a.targetStateMap[d].inProgress) { var e = $("#" + d + " video"); null !== e && e.attr("controls", a.targetStateMap[d].controls) } a.targetStateMap[d].inProgress--, b.getActionLoopDetails() && a.handleLoop(b), a.onComplete(c) }, AnimActionHandler.prototype.returnToOriginState = function (a) { a.getActionLoopDetails() && AnimActionHandler.prototype.initActionLoopDetails(a), ActionHandler.prototype.returnToOriginState(a) }, AnimActionHandler.prototype.handleLoop = function (a) { var b = a.getActionLoopDetails(); b && ("false" === b.loopForever ? b.loopTimes > 0 && (b.loopTimes--, b.beforeLoop && b.beforeLoop(), setTimeout(function () { a.getActionRefereance().restart() }, b.delayTime)) : (b.beforeLoop && b.beforeLoop(), setTimeout(function () { a.getActionRefereance().restart() }, b.delayTime))) }, AnimActionHandler.prototype.initActionLoopDetails = function (a) { var b = a.getActionParams(), c = b.getInt("loopTimes"), d = b.get("loopForever"), e = b.getInt("delay"); a.actionLoopDetails = { loopTimes: c, loopForever: d, delayTime: e, tweenRef: a.getActionRefereance() } }, AnimActionHandler.prototype.getTweenRef = function (a, b, c, d) { return c && d ? TweenLite.fromTo($("#" + a), b.getInt("duration") / 1e3, c, d) : c ? TweenLite.to($("#" + a), b.getInt("duration") / 1e3, c) : d ? TweenLite.to($("#" + a), b.getInt("duration") / 1e3, d) : void 0 }, AnimActionHandler.prototype.parseElementSize = function (a, b) { for (var c in a) a.hasOwnProperty(c) && (a[c] = responsiveManager.parseElementSize(b, c, a[c])) }, AnimActionHandler.prototype.play = function (a, b, c, d, e) { var f = a.getActionParams(), g = a.getActionTarget(), h = a.getActionRefereance(); if (e.onCompleteParams = [this, a, c], b) h = AnimActionHandler.prototype.getTweenRef(g, f, d, e); else { if (AnimActionHandler.prototype.parseElementSize(f, g), AnimActionHandler.prototype.parseElementSize(d, g), AnimActionHandler.prototype.parseElementSize(e, g), h && h.paused()) return h.play(), a.getActionRefereance(); AnimActionHandler.prototype.initActionLoopDetails(a), h = AnimActionHandler.prototype.getTweenRef(g, f, d, e) } return a.actionRef = h, h }, AnimActionHandler.prototype.pause = function (a) { var b = a.getActionRefereance(); b && b.pause() }, AnimActionHandler.prototype.stop = function (a, b) { b && this.resetTargetStateMap(a.getActionTarget()), ActionHandler.prototype.stop(a) }, AnimActionHandler.prototype.resetTargetStateMap = function (a) { $("#" + a); this.targetStateMap[a].cleared = !0 }, FadeInActionHandler.prototype = new AnimActionHandler, FadeInActionHandler.prototype.execute = function (a, b, c) { var d = a.getActionParams(), e = a.getActionTarget(); if (d.validate()) { var f = this.getAnimParams(e); return f.delay = d.getInt("delay") / 1e3, f.autoAlpha = 1, f.opacity = 1, "none" !== d.get("ease") ? f.ease = "Power" + (d.getInt("easePower") - 1) + "." + d.get("ease") : f.ease = "Linear.easeNone", AnimActionHandler.prototype.play.call(this, a, b, c, null, f) } }, FadeInActionHandler.prototype.returnToOriginState = function (a) { AnimActionHandler.prototype.returnToOriginState.call(this, a); var b = a.getActionTarget(), c = $("#" + b); c.css("opacity", this.targetStateMap[b].originState.opacity), c.css("visibility", this.targetStateMap[b].originState.visibility) }, FadeOutActionHandler.prototype = new AnimActionHandler, FadeOutActionHandler.prototype.execute = function (a, b, c) { var d = a.getActionParams(), e = a.getActionTarget(); if (d.validate()) { var f = this.getAnimParams(e), g = f.onComplete, h = this; return f.delay = d.getInt("delay") / 1e3, f.opacity = 0, "none" !== d.get("ease") ? f.ease = "Power" + (d.getInt("easePower") - 1) + "." + d.get("ease") : f.ease = "Linear.easeNone", f.onComplete = function () { $(window).trigger("", e), g(h, a, c) }, AnimActionHandler.prototype.play.call(this, a, b, c, null, f) } }, FadeOutActionHandler.prototype.returnToOriginState = function (a) { AnimActionHandler.prototype.returnToOriginState.call(this, a); var b = a.getActionTarget(), c = $("#" + b); c.css("opacity", this.targetStateMap[b].originState.opacity), c.css("visibility", this.targetStateMap[b].originState.visibility) }, ShowActionHandler.prototype = new AnimActionHandler, ShowActionHandler.prototype.execute = function (a, b, c) { var d = a.getActionParams(), e = a.getActionTarget(), f = this.getAnimParams(e); f.delay = d.getInt("delay") / 1e3, f.visibility = "visible", f.onCompleteParams = [this, a, c]; var g = $("#" + e); if (d.validate()) { this.tweenRef = TweenLite.to(g, 1e-4, f); var h = g.children().first(); "IFRAME" == h.prop("tagName") && setTimeout(function () { h.css({ position: "", left: "", top: "" }) }, d.getInt("delay")) } }, ShowActionHandler.prototype.returnToOriginState = function (a) { var b = a.getActionTarget(), c = $("#" + b); c.css("visibility", this.targetStateMap[b].originState.visibility) }, HideActionHandler.prototype = new AnimActionHandler, HideActionHandler.prototype.execute = function (a, b, c) { var d = a.getActionParams(), e = a.getActionTarget(), f = this.getAnimParams(e), g = $("#" + e); f.delay = d.getInt("delay") / 1e3, f.visibility = "hidden"; var h = f.onComplete, i = this; if (f.onComplete = function () { $(window).trigger("elementHidden", e), h(i, a, c) }, d.validate()) { this.tweenRef = TweenLite.to(g, 1e-4, f); var j = g.children().first(); "IFRAME" == j.prop("tagName") && setTimeout(function () { j.css({ position: "absolute", left: "-100000px", top: "-100000px" }) }, d.getInt("delay")) } }, HideActionHandler.prototype.returnToOriginState = function (a) { var b = a.getActionTarget(), c = $("#" + b); c.css("visibility", this.targetStateMap[b].originState.visibility); var d = c.children().first(); "IFRAME" == d.prop("tagName") && d.css({ position: "", left: "", top: "" }) }, MotionActionHandler.prototype = new AnimActionHandler, MotionActionHandler.prototype.prepare = function (a, b) { AnimActionHandler.prototype.prepare.call(this, a, b), $("#" + b).css({ top: a.getInt("startY") + this.offsetY + "px", left: a.getInt("startX") + this.offsetX + "px" }) }, MotionActionHandler.prototype.execute = function (a, b, c) { var d = a.getActionParams(), e = a.getActionTarget(); if (d.validate()) { var f = { top: d.getInt("startY") + this.offsetY + "px", left: d.getInt("startX") + this.offsetX + "px" }, g = this.getAnimParams(e); return g.delay = d.getInt("delay") / 1e3, g.top = d.getInt("endY") + this.offsetY + "px", g.left = d.getInt("endX") + this.offsetX + "px", "none" !== d.get("ease") ? g.ease = "Power" + (d.getInt("easePower") - 1) + "." + d.get("ease") : g.ease = "Linear.easeNone", AnimActionHandler.prototype.play.call(this, a, b, c, f, g) } }, MotionActionHandler.prototype.returnToOriginState = function (a) { AnimActionHandler.prototype.returnToOriginState.call(this, a); var b = a.getActionParams(), c = a.getActionTarget(), d = $("#" + c); d.css("top", b.getInt("startY") + this.offsetY), d.css("left", b.getInt("startX") + this.offsetX) }, SlideInActionHandler.prototype = new AnimActionHandler, SlideInActionHandler.prototype.prepare = function (a, b) { AnimActionHandler.prototype.prepare.call(this, a, b), $("#" + b).css({ top: a.getInt("startY") + this.offsetY + "px", left: a.getInt("startX") + this.offsetX + "px" }) }, SlideInActionHandler.prototype.execute = function (a, b, c) { var d = a.getActionParams(), e = a.getActionTarget(); if (d.validate()) { var f = { top: d.getInt("startY") + this.offsetY + "px", left: d.getInt("startX") + this.offsetX + "px" }, g = this.getAnimParams(e); return g.delay = d.getInt("delay") / 1e3, this.targetStateMap[e].position && (g.top = this.targetStateMap[e].position.top, g.left = this.targetStateMap[e].position.left), "none" !== d.get("ease") ? g.ease = "Power" + (d.getInt("easePower") - 1) + "." + d.get("ease") : g.ease = "Linear.easeNone", AnimActionHandler.prototype.play.call(this, a, b, c, f, g) } }, SlideInActionHandler.prototype.returnToOriginState = function (a) { AnimActionHandler.prototype.returnToOriginState.call(this, a); var b = a.getActionParams(), c = a.getActionTarget(), d = $("#" + c); d.css("top", b.getInt("startY") + this.offsetY), d.css("left", b.getInt("startX") + this.offsetX) }, SlideOutActionHandler.prototype = new AnimActionHandler, SlideOutActionHandler.prototype.execute = function (a, b, c) { var d = a.getActionParams(), e = a.getActionTarget(); if (d.validate()) { var f = this.getAnimParams(e); return f.delay = d.getInt("delay") / 1e3, f.top = d.getInt("endY") + this.offsetY + "px", f.left = d.getInt("endX") + this.offsetX + "px", "none" !== d.get("ease") ? f.ease = "Power" + (d.getInt("easePower") - 1) + "." + d.get("ease") : f.ease = "Linear.easeNone", AnimActionHandler.prototype.play.call(this, a, b, c, null, f) } }, SlideOutActionHandler.prototype.returnToOriginState = function (a) { AnimActionHandler.prototype.returnToOriginState.call(this, a); var b = a.getActionTarget(), c = $("#" + b); c.css("top", this.targetStateMap[b].originState.position.top), c.css("left", this.targetStateMap[b].originState.position.left) }, ScaleActionHandler.prototype = new AnimActionHandler, ScaleActionHandler.prototype.execute = function (a, b, c) { var d = a.getActionParams(), e = a.getActionTarget(); if (d.validate()) { var f = d.getInt("scale") / 100, g = this.getAnimParams(e); return g.scale = f * this.targetStateMap[e].scale, this.targetStateMap[e].scale *= f, g.delay = d.getInt("delay") / 1e3, g.parseTransform = !0, "none" !== d.get("ease") ? g.ease = "Power" + (d.getInt("easePower") - 1) + "." + d.get("ease") : g.ease = "Linear.easeNone", AnimActionHandler.prototype.play.call(this, a, b, c, null, g) } }, ScaleActionHandler.prototype.returnToOriginState = function (a) { AnimActionHandler.prototype.returnToOriginState.call(this, a); var b = a.getActionTarget(), c = $("#" + b); c.css("transform", "scale(" + this.targetStateMap[b].originState.scale + ")"), this.targetStateMap[b].scale = this.targetStateMap[b].originState.scale }, RotateActionHandler.prototype = new AnimActionHandler, RotateActionHandler.prototype.execute = function (a, b, c) { var d = a.getActionParams(), e = a.getActionTarget(); if (d.validate()) { var f = d.getInt("degree") * d.getInt("direction"), g = this.getAnimParams(e), h = { rotation: this.targetStateMap[e].rotation }; return g.rotation = this.targetStateMap[e].rotation + f, this.targetStateMap[e].rotation += f, g.delay = d.getInt("delay") / 1e3, g.parseTransform = !0, "none" !== d.get("ease") ? g.ease = "Power" + (d.getInt("easePower") - 1) + "." + d.get("ease") : g.ease = "Linear.easeNone", AnimActionHandler.prototype.play.call(this, a, b, c, h, g) } }, RotateActionHandler.prototype.returnToOriginState = function (a) { AnimActionHandler.prototype.returnToOriginState.call(this, a); var b = a.getActionTarget(), c = $("#" + b); c.css("transform", "rotate(" + this.targetStateMap[b].originState.rotation + "deg)"), this.targetStateMap[b].rotation = this.targetStateMap[b].originState.rotation }, function () { function a() { this.addHandler(SlideInActionHandler), this.addHandler(SlideOutActionHandler), this.addHandler(MotionActionHandler), this.addHandler(FadeInActionHandler), this.addHandler(FadeOutActionHandler), this.addHandler(ShowActionHandler), this.addHandler(HideActionHandler), this.addHandler(RotateActionHandler), this.addHandler(ScaleActionHandler) } a.prototype = new ActionsGroup("animation", "Animation"), $(window).trigger("registerActionGroupEvent", new a) }(), SocialActionParams.prototype = new ActionParams("1.0.0"), SocialActionParams.prototype.constructor = SocialActionParams, SocialActionParams.prototype.validate = function () { return this.get("delay") >= 0 }, GetFeedDataActionHandler.prototype = new ActionHandler, GetFeedDataActionHandler.prototype.execute = function (a, b, c) { return ActionHandler.prototype.play.call(this, a, b, c, this.getFeedData) }, GetFeedDataActionHandler.prototype.getFeedData = function (a, b) { var c = adkit.$(b); if (c && "function" == typeof c.getFeedData) { var d = a.getInt("delay"); 0 === d ? c.getFeedData() : setTimeout(function () { c.getFeedData() }, d) } return !0 }, function () { function a() { this.addHandler(GetFeedDataActionHandler) } a.prototype = new ActionsGroup("socialActions", "Social Actions"), $(window).trigger("registerActionGroupEvent", new a) }(), Action.prototype = function () { var a = function () { return this.actionParams }, b = function () { return this.actionHandler }, c = function () { return this.actionRef }, d = function () { return this.actionLoopDetails }, e = function () { return this.actionId }, f = function () { return this.getActionHandler() && (this.getActionHandler().targetable || this.actionTarget) ? this.actionTarget === INTERACTIONS_CONSTS.TARGET_SELF && this.actionSelf ? this.actionSelf : this.actionTarget : !0 }, g = function (a) { this.actionTarget = a }, h = function () { return this.getActionHandler() && (null === this.getActionParams() || this.getActionParams().validate()) && this.getActionTarget() }, i = function (a, b, c) { this.validate() && this.getActionHandler().execute(a, b, c) }, j = function (a) { this.validate() && this.getActionHandler().stop(this, a) }, k = function () { return this.getActionHandler() && this.getActionHandler().targetable }, l = function (a, b, c) { this.actionSelf || (this.actionSelf = a), this.getActionHandler() && this.getActionHandler().init(this.getActionParams(), this.getActionTarget(), b, c) }, m = function () { this.getActionHandler() && this.getActionHandler().prepare(this.getActionParams(), this.getActionTarget()) }, n = function (a) { this.actionId = a.actionId, this.actionHandler = ActionHandlersFactory.getActionHandler(a.actionId), this.actionParams = this.getActionHandler().getParams(!1), a.actionParams && this.actionParams.initFromJSON(a.actionParams), this.actionTarget = a.actionTarget }; return { execute: i, stop: j, validate: h, getActionId: e, getActionParams: a, getActionHandler: b, getActionTarget: f, getActionRefereance: c, getActionLoopDetails: d, setActionTarget: g, initFromJSON: n, isTargetable: k, init: l, prepare: m } }(), Action.validateJSONAction = function (a) { return a.actionId && a.actionParams ? !0 : !1 }, Interaction.state = { EXECUTING: "executing", STOPPED: "stopped", PAUSED: "paused" }, Interaction.eLoopTimes = { ONCE: "once", FOREVER: "forever", OTHER: "other" }, Interaction.initialize = function (a) { ActionParams.setAssetsHelper(a) }, Interaction.prototype = function () { var a = function () { return this.interactionId }, b = function () { return this.eventId }, c = function () { return this.actions }, d = function (a) { return this.actions[a] }, e = function (a) { return this.actions[a].getActionTarget() }, f = function (a, b, c) { a ? k.call(this, a, b) : "true" !== c && this.isExecuting() || (this.loopTracker.countIterations = 0, (!c || "true" === c && !this.isPaused() || this.isStopped()) && j.call(this), this.status = Interaction.state.EXECUTING, k.call(this, a, b, g)) }, g = function (a) { a.canRunInInterLoop === !0 && this.loopTracker.numOfEndedActions++; var b = h.call(this); "forever" !== b && this.loopTracker.numOfEndedActions >= b && i.call(this) }, h = function () { for (var a = 0, b = 0; b < this.getAllActions().length; b++) { var c = this.getAction(b); if (c.actionHandler.canRunInInterLoop === !0) { if (c.actionParams.loopForever && "true" === c.actionParams.loopForever) { a = "forever"; break } var d = c.actionParams.loopTimes ? parseInt(c.actionParams.loopTimes) : 0; a += d + 1 } } return a }, i = function () { this.loopTracker.numOfEndedActions = 0; var a = h.call(this); return 0 === a || this.loopDDvalue !== Interaction.eLoopTimes.FOREVER && this.loopTracker.countIterations == this.loopTimes ? (this.loopTracker.countIterations = 0, void (this.status = Interaction.state.STOPPED)) : (this.loopTracker.countIterations++, j.call(this, !0), void k.call(this, void 0, void 0, g)) }, j = function (a) { this.status = Interaction.state.STOPPED, this.loopTracker.numOfEndedActions = 0; for (var b, c = 0; c < this.getAllActions().length; c++) b = this.getAction(c), (b.validate() && !a || a && b.getActionHandler().canRunInInterLoop) && b.actionHandler.returnToOriginState(b) }, k = function (a, b, c) { this.status = Interaction.state.EXECUTING, c = void 0 !== c ? c.bind(this) : c; for (var d = 0; d < this.getAllActions().length; d++) b && this.getAction(d).getActionId().split(".")[0] !== b || this.getAction(d).execute(this.getAction(d), a, c) }, l = function (a) { if (this.isExecuting() || this.isPaused()) { this.status = Interaction.state.STOPPED; var b = this.getAllActions(); b.forEach(function (b) { b.stop(a) }) } }, m = function (a) { Utils.stopPropagation(a), a.data.execute() }, n = function () { return this.getEventId() && this.getAllActions() }, o = function (a) { a && n.call(this) && $("#" + a).bind(this.getEventId(), this, m) }, p = function (a, b, c, d) { var e = 0, f = 0; b && (e = b), c && (f = c); for (var g = 0; g < this.getAllActions().length; g++) d && this.getAction(g).getActionId().split(".")[0] !== d || this.getAction(g) && this.getAction(g).init(a, e, f) }, q = function (a) { for (var b = 0; b < this.getAllActions().length; b++) a && this.getAction(b).getActionId().split(".")[0] !== a || this.getAction(b) && this.getAction(b).prepare() }, r = function () { if (this.isExecuting()) { this.status = Interaction.state.PAUSED; var a = this.getAllActions(); a.forEach(function (a) { a.getActionHandler().pause(a) }) } }, s = function () { return this.status === Interaction.state.EXECUTING }, t = function () { return this.status === Interaction.state.PAUSED }, u = function () { return this.status === Interaction.state.STOPPED }; return { attach: o, execute: f, stop: l, getEventId: b, getInteractionId: a, getAction: d, getAllActions: c, getActionTarget: e, init: p, prepare: q, executeActions: k, pause: r, isExecuting: s, isPaused: t, isStopped: u } }(), Interaction.createFromJSON = function (a) { var b = new Interaction; b.interactionId = a.interactionId || null, b.eventId = a.eventId || null, b.loopDDvalue = a.loopDDvalue || Interaction.eLoopTimes.ONCE, b.loopTimes = a.loopTimes || 0, b.totalDuration = a.totalDuration || 0; for (var c = 0; c < a.actions.length; c++) if (Action.validateJSONAction(a.actions[c])) { var d = new Action; d.initFromJSON(a.actions[c]), b.actions.push(d) } return b }; var InteractionsMgr = function () { function a() { var a = adkit.getAdInfo(), b = a.adPart.data; if (b.interactions) { var c = b.interactions; c.forEach(function (a) { var b = Interaction.createFromJSON(a); b.init(), b.attach("adkit-container"), h.push(b) }) } var d = b.items; d.forEach(function (a) { var b = !1; a.interactions && (a.interactions.forEach(function (c) { var d = Interaction.createFromJSON(c); d.init(a.id), "adLoad" === c.eventId ? d.attach("adkit-container") : d.attach(a.id), h.push(d), ("click" === d.eventId || "dblclick" === d.eventId) && (b = !0) }), b && $("#" + a.id).css("cursor", "pointer")) }) } function b() { return h } function c(a) { var b = null; return h.some(function (c) { return c.getInteractionId() === a ? (b = c, !0) : void 0 }), b } function d() { h.forEach(function (a) { a.prepare() }) } function e(a) { var b = c(a); b.pause() } function f(a, b) { var d = c(a); d && d.execute(null, null, b) } function g(a) { var b = c(a); b.stop() } var h = []; return { init: a, getInteractions: b, getInteraction: c, prepareInteractions: d, pauseInteraction: e, startInteraction: f, stopInteraction: g } }(); $("body").trigger("moduleLoadedEvent");