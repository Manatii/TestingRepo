<!DOCTYPE html>
<!-- saved from url=(0056)https://www.payfast.co.za/documentation/sample-code-php/ -->
<html lang="en-GB" prefix="og: http://ogp.me/ns#" style="" class=" js csstransforms3d csstransitions"><script src="./Sample code_ PHP _ PayFast_files/2341542662737769" async=""></script><script src="./Sample code_ PHP _ PayFast_files/1901745913432385" async=""></script><script async="" src="./Sample code_ PHP _ PayFast_files/fbevents.js.download"></script><script async="" src="./Sample code_ PHP _ PayFast_files/gtm.js.download"></script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Sample code: PHP | PayFast</title><link rel="canonical" href="https://www.payfast.co.za/documentation/sample-code-php/"><link rel="publisher" href="https://plus.google.com/u/0/+payfast"><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="og:title" content="Sample code: PHP | PayFast"><meta property="og:description" content="ITN sample code PDT sample code"><meta property="og:url" content="https://www.payfast.co.za/documentation/sample-code-php/"><meta property="og:site_name" content="PayFast"><meta name="twitter:card" content="summary"><meta name="twitter:description" content="ITN sample code PDT sample code"><meta name="twitter:title" content="Sample code: PHP | PayFast"><link rel="dns-prefetch" href="https://s.w.org/"> <script async="" src="./Sample code_ PHP _ PayFast_files/analytics.js.download"></script><script type="text/javascript" data-cfasync="false">var disableStr='ga-disable-UA-3492176-1';function __gaTrackerIsOptedOut(){return document.cookie.indexOf(disableStr+'=true')>-1;}if(__gaTrackerIsOptedOut()){window[disableStr]=true;}function __gaTrackerOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';window[disableStr]=true;}(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');__gaTracker('create','UA-3492176-1','auto');__gaTracker('set','forceSSL',true);__gaTracker('send','pageview');</script> <script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.payfast.co.za\/template/lib\/js\/wp-emoji-release.min.js"}};!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b===c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><script src="./Sample code_ PHP _ PayFast_files/wp-emoji-release.min.js.download" type="text/javascript" defer=""></script> <style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0 .07em !important;vertical-align:-0.1em !important;background:none !important;padding:0 !important}</style><link rel="stylesheet" id="livicons_css-css" href="./Sample code_ PHP _ PayFast_files/customlivicons.x69655.css" type="text/css" media="all"><link rel="stylesheet" id="wp-syntax-css-css" href="./Sample code_ PHP _ PayFast_files/wp-syntax.x69655.css" type="text/css" media="all"><link rel="stylesheet" id="woo-testimonials-css-css" href="./Sample code_ PHP _ PayFast_files/testimonials.x69655.css" type="text/css" media="all"><link rel="stylesheet" id="woo-features-css-css" href="./Sample code_ PHP _ PayFast_files/features.x69655.css" type="text/css" media="all"><link rel="stylesheet" id="woothemes-features-layout-css" href="./Sample code_ PHP _ PayFast_files/layout.x69655.css" type="text/css" media="all"><link rel="stylesheet" id="upw_theme_standard-css" href="./Sample code_ PHP _ PayFast_files/upw-theme-standard.min.x69655.css" type="text/css" media="all"><link rel="stylesheet" id="theme-stylesheet-css" href="./Sample code_ PHP _ PayFast_files/main.x69655.css" type="text/css" media="all"><link rel="stylesheet" id="woo-layout-css" href="./Sample code_ PHP _ PayFast_files/layout.x69655(1).css" type="text/css" media="all"><link rel="stylesheet" id="sccss_style-css" href="./Sample code_ PHP _ PayFast_files/saved_resource" type="text/css" media="all"><link rel="stylesheet" id="woo_google_fonts-css" href="./Sample code_ PHP _ PayFast_files/css" type="text/css" media="all"><link rel="stylesheet" id="lightboxStyle-css" href="./Sample code_ PHP _ PayFast_files/colorbox.min.x69655.css" type="text/css" media="screen"> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/jquery.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/jquery-migrate.min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/general-child.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/isotope.min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/jquery.jsticky.min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/ace.x69655.js.download"></script><style id="ace_editor.css">.ace_editor {position: relative;overflow: hidden;font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;direction: ltr;text-align: left;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}
/*# sourceURL=ace/css/ace_editor.css */</style><style id="ace-tm">.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}
/*# sourceURL=ace/css/ace-tm */</style><style>    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }</style> <!--[if lt IE 8]> <script type='text/javascript' src='https://www.payfast.co.za/template/lib/js/json2.min.x69655.js'></script> <![endif]--> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/raphael-min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/customlivicons.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/frontend.min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/gtm4wp-form-move-tracker.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/fitvids.min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/modernizr.min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/jquery.doubleTapToGo.min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/waypoints.min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/jquery.stellar.min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/general.x69655.js.download"></script> <link rel="https://api.w.org/" href="https://www.payfast.co.za/wp-json/"><link rel="alternate" type="application/json+oembed" href="https://www.payfast.co.za/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.payfast.co.za%2Fdocumentation%2Fsample-code-php%2F"><link rel="alternate" type="text/xml+oembed" href="https://www.payfast.co.za/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.payfast.co.za%2Fdocumentation%2Fsample-code-php%2F&amp;format=xml"> <script data-cfasync="false" type="text/javascript">var gtm4wp_datalayer_name="dataLayer";var dataLayer=dataLayer||[];dataLayer.push({"pagePostType":"documentation","pagePostType2":"single-documentation","pagePostAuthor":"Werner van Rooyen"});</script> <script data-cfasync="false">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.'+'js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KPHZ88M');/*]]>*/</script> <meta name="generator" content="PayFast 1.0"><meta name="generator" content="Hub 1.2.15"><meta name="generator" content="WooFramework 6.2.5"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> <!--[if lt IE 9]> <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script> <![endif]--><link href="./Sample code_ PHP _ PayFast_files/css(1)" rel="stylesheet" type="text/css"><link href="./Sample code_ PHP _ PayFast_files/default.x69655.css" rel="stylesheet" type="text/css"><link rel="shortcut icon" href="https://www.payfast.co.za/storage/favicon-32x32.x69655.png"><link href="./Sample code_ PHP _ PayFast_files/shortcodes.x69655.css" rel="stylesheet" type="text/css"><link href="./Sample code_ PHP _ PayFast_files/custom.x69655.css" rel="stylesheet" type="text/css"><script src="./Sample code_ PHP _ PayFast_files/theme-chrome.js.download"></script><script src="./Sample code_ PHP _ PayFast_files/mode-php.js.download"></script><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style></head><body class="documentation-template-default single single-documentation postid-210 chrome alt-style-default layout-left-content"> <noscript>&lt;iframe src="//www.googletagmanager.com/ns.html?id=GTM-KPHZ88M" height="0" width="0" style="display:none;visibility:hidden"&gt;&lt;/iframe&gt;</noscript><div id="wrapper"><div id="inner-wrapper"><div id="swifttagcontainer00znpq3dch"><div id="proactivechatcontainer00znpq3dch"><div id="proactivechatdiv" style="position: absolute; display: none; float: left; top: 125.5px; left: 458px; z-index: 500;"><div style="FLOAT: left; WIDTH: 500px; BACKGROUND: #FFFFFF URL(&#39;https://support.payfast.co.za/__swift/themes/client/images/mainbackground.gif&#39;) REPEAT; BORDER: SOLID 1px #bcb5a6;"><div style="BACKGROUND: #FFFFFF URL(&#39;https://support.payfast.co.za/__swift/themes/client/images/icon_proactiveuserbackground.gif&#39;) NO-REPEAT bottom left; BORDER: SOLID 1px #bcb5a6; MARGIN: 8px;"><div style="TEXT-ALIGN: center;"><img src="./Sample code_ PHP _ PayFast_files/file_ghkfqnlapi10hnn.png" border="0" align="absmiddle"></div><hr align="center" style="WIDTH: 80%; BORDER: none; COLOR: #bcb5a6; BACKGROUND-COLOR: #bcb5a6; HEIGHT: 1px; MARGIN-TOP: 10px; MARGIN-BOTTOM: 3px;"><div style="PADDING-LEFT: 120px; TEXT-ALIGN: left; MARGIN-TOP: 30px; HEIGHT: 60px; OVERFLOW: hidden; FONT: 45px Trebuchet MS, Georgia, Verdana, Arial, Helvetica; COLOR: #333333;">Can I help you?</div><div style="PADDING-LEFT: 120px; VERTICAL-ALIGN: top; MARGIN-TOP: 0px; PADDING-TOP: 0px; HEIGHT: 200px; FONT: 18pt Trebuchet MS, Georgia, Verdana, Arial, Helvetica; COLOR: #776849;">Our team is ready to assist you. Click "Chat Now" to be connected to one instantly.<br><div style="PADDING-TOP: 30px; PADDING-LEFT: 80px; TEXT-ALIGN: center;"><div style="BORDER: SOLID 0 #FFFFFF; TEXT-ALIGN: center; BACKGROUND: URL(https://support.payfast.co.za/__swift/themes/client/images/proactivebutton.gif) no-repeat; HEIGHT: 37px; WIDTH: 135px; COLOR: #000000; FONT-WEIGHT: bold; FONT-FAMILY: Trebuchet MS, Georgia, Helvetica, Verdana, Tahoma; FONT-SIZE: 16px; MARGIN: 0px; PADDING-TOP: 6px; PADDING-BOTTOM: 15px; VERTICAL-ALIGN: middle; CURSOR: pointer;" onmouseover="this.style.color=&#39;red&#39;;" onmouseout="this.style.color=&#39;#000000&#39;" onclick="javascript:doProactiveRequest_zbzw94r7();">Chat Now</div></div></div></div></div><div style="FLOAT: left; MARGIN-LEFT: -8px; MARGIN-TOP: -8px;"><a href="javascript:closeProactiveRequest_zbzw94r7();"><img src="./Sample code_ PHP _ PayFast_files/icon_close.png" border="0" align="absmiddle"></a></div></div><div id="inlinechatdiv" style="position: absolute; display: none; float: left; top: -14.5px; left: 383px; z-index: 500;"><div style="FLOAT: left; WIDTH: 600px; BACKGROUND: #FFFFFF; BORDER: SOLID 1px #bcb5a6;"><iframe width="600" height="680" scrolling="auto" frameborder="0" src="./Sample code_ PHP _ PayFast_files/saved_resource.html" name="inlinechatframe" id="inlinechatframe">ERROR: No IFRAME Support Detected</iframe></div><div style="FLOAT: left; MARGIN-LEFT: -8px; MARGIN-TOP: -8px;"><a href="javascript: closeInlineProactiveRequest_zbzw94r7();"><img src="./Sample code_ PHP _ PayFast_files/icon_close.png" border="0" align="absmiddle"></a></div></div></div><div class="display-inline" id="swifttagdatacontainer00znpq3dch"><div><style type="text/css">#kayako_sitebadgebg:hover {	background-color: #bec0c5 !important;}#kayako_sitebadgebg {	background-color: #a2a4ac;	border-color: #bec0c5 #717378 #717378 #717378 !important;}</style><script type="text/javascript">function openHelp(){       }</script><div id="kayako_sitebadgecontainer" title="PayFast Support" onclick="javascript:  window.open( &#39;https://www.payfast.co.za/support/index.php?/Tickets/Submit&#39;, &#39;_blank&#39; );" style="background: transparent none repeat scroll 0 0; bottom: 0; cursor:pointer; height: 101px; left: 0; line-height: normal; margin: 0; padding: 0; position: fixed; top: 35% !important; z-index: 4000000000 !important;">	<div id="kayako_sitebadgeholder">				<div id="kayako_sitebadgebg" style="background-color: #198c19; border-color: #bec0c5 #717378 #717378 #717378 !important; background-image: URL(&#39;https://www.payfast.co.za/images/badge_help_white.png&#39;); background-repeat: no-repeat;background-position: 0px -4px; -moz-border-radius: 0 1em 1em 0 !important; border-radius: 0 1em 1em 0 !important; -webkit-border-radius: 0 1em 1em 0 !important; border-style: outset outset outset none !important; border-width: 1px 1px 1px medium !important; height: 101px !important; left: 0 !important; margin: 0 !important; opacity: 0.90 !important; padding: 0 !important; position: absolute !important; top: 0 !important; width: 30px !important; z-index: 19999 !important;"></div>	</div></div></div></div><script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/index.php"></script></div><div id="top"><div class="wrapper"> <nav class="col-full" role="navigation"><div class="top-navigation"><h3>Top menu</h3><ul id="top-nav" class="nav"><li id="menu-item-2789" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2789"><a href="mailto:support@payfast.co.za">support@payfast.co.za</a></li><li id="menu-item-2790" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2790"><a href="tel:+27861729327">0861 729 327</a></li><li id="menu-item-2348" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2348"><a href="https://www.payfast.co.za/support/"><i class="fa fa-heart"></i> Help Center</a></li><li id="menu-item-538" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-538"><a href="https://www.payfast.co.za/documentation"><span class="fa fa-gear"></span> Developers</a></li><li id="menu-item-537" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-537"><a href="https://www.payfast.co.za/user/login"><span class="required"><i class="fa fa-key"></i> Login</span></a></li></ul></div> </nav></div></div><div id="header-wrapper" class="sticky"><div class="wrapper"><header id="header"><div class="contact-header"><div class="widget widget_woo_subscribe">					<aside id="connect" class="fix"><h3>Subscribe</h3><div><div class="social"> <a target="_blank" href="https://www.payfast.co.za/rss.xml/" class="subscribe" title="RSS"></a><a target="_blank" href="https://www.twitter.com/payfast" class="twitter" title="Twitter"></a><a target="_blank" href="https://www.facebook.com/payfast" class="facebook" title="Facebook"></a><a target="_blank" href="https://za.linkedin.com/company/payfast" class="linkedin" title="LinkedIn"></a><a target="_blank" href="https://plus.google.com/+payfast/posts" class="googleplus" title="Google+"></a></div></div></aside></div><ul id="top-nav" class="nav"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2789"><a href="mailto:support@payfast.co.za">support@payfast.co.za</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2790"><a href="tel:+27861729327">0861 729 327</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2348"><a href="https://www.payfast.co.za/support/"><i class="fa fa-heart"></i> Help Center</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-538"><a href="https://www.payfast.co.za/documentation"><span class="fa fa-gear"></span> Developers</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-537"><a href="https://www.payfast.co.za/user/login"><span class="required"><i class="fa fa-key"></i> Login</span></a></li></ul></div> <a id="logo" href="https://www.payfast.co.za/" title="Secure Online Payment Processing for South Africa"> <img src="./Sample code_ PHP _ PayFast_files/v2_logo.png" alt="PayFast"> </a><span class="nav-toggle"><a href="https://www.payfast.co.za/documentation/sample-code-php/#navigation"><span>Navigation</span></a></span><div class="site-header"><h1 class="site-title"><a href="https://www.payfast.co.za/">PayFast</a></h1><h2 class="site-description">Secure Online Payment Processing for South Africa</h2></div> <nav id="navigation" role="navigation"><section class="menus"><a href="https://www.payfast.co.za/" class="nav-home"><span>Home</span></a><h3>Header</h3><ul id="main-nav" class="nav"><li id="menu-item-509" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-509"><a href="https://www.payfast.co.za/what-is-payfast/">What we do</a></li><li id="menu-item-4086" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-4086 parent"><a href="https://www.payfast.co.za/integration/">Integration</a><ul class="sub-menu" style="margin-left: -39px;"><li id="menu-item-118" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-118"><a href="https://www.payfast.co.za/shopping-carts/">Shopping Carts</a></li><li id="menu-item-4087" class="menu-item menu-item-type-post_type_archive menu-item-object-documentation menu-item-4087"><a href="https://www.payfast.co.za/documentation/">Custom</a></li><li id="menu-item-4088" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4088"><a href="https://www.payfast.co.za/html-buttons/">HTML buttons</a></li><li id="menu-item-4089" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4089"><a href="https://www.payfast.co.za/request-money/">Request money</a></li></ul></li><li id="menu-item-4094" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-4094 parent"><a href="https://www.payfast.co.za/recurring-billing/">Recurring Billing</a><ul class="sub-menu" style="margin-left: -17.5px;"><li id="menu-item-4093" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4093"><a href="https://www.payfast.co.za/subscriptions/">Subscriptions</a></li><li id="menu-item-4095" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4095"><a href="https://www.payfast.co.za/ad-hoc-payments/">Ad Hoc Payments</a></li></ul></li><li id="menu-item-511" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-511 parent"><a href="https://www.payfast.co.za/payment-methods/">Payment methods</a><ul class="sub-menu" style="margin-left: -16.5px;"><li id="menu-item-2451" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2451"><a href="https://www.payfast.co.za/credit-cheque-cards/">Credit &amp; Cheque cards</a></li><li id="menu-item-2453" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2453"><a href="https://www.payfast.co.za/instant-eft/">Instant EFT</a></li><li id="menu-item-2450" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2450"><a href="https://www.payfast.co.za/bitcoin/">Bitcoin</a></li><li id="menu-item-2454" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2454"><a href="https://www.payfast.co.za/mobicred/">mobicred</a></li><li id="menu-item-3560" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3560"><a href="https://www.payfast.co.za/masterpass/">Masterpass</a></li><li id="menu-item-2452" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2452"><a href="https://www.payfast.co.za/debit-cards/">Debit cards</a></li></ul></li><li id="menu-item-2788" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2788"><a href="https://www.payfast.co.za/fees/">Fees</a></li><li id="menu-item-2668" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2668"><a href="https://www.payfast.co.za/user/register"><span class="required"><i class="fa fa-pencil-square-o"></i> Register</span></a></li></ul> </section><a href="https://www.payfast.co.za/documentation/sample-code-php/#top" class="nav-close"><span>Return to Content</span></a></nav> </header></div></div><div id="content"><div class="wrapper"> <section id="main"><div id="breadcrumbs"><a href="https://www.payfast.co.za/documentation/">Documentation</a> &gt; <a href="https://www.payfast.co.za/documentation-section/sample-code/">Sample code</a></div> <article class="post-210 documentation type-documentation status-publish hentry document_section-sample-code"> <nav id="post-entries" class="fix"><div class="nav-prev fl"><a href="https://www.payfast.co.za/documentation/faqs/" rel="prev">12. FAQs</a></div><div class="nav-next fr"><a href="https://www.payfast.co.za/documentation/sample-code-ruby-on-rails/" rel="next">Sample code: Ruby on Rails</a></div> </nav><header><h1>Sample code: PHP</h1> </header> <section class="entry fix"><h2><span id="ITN_sample_code">ITN sample code</span></h2><pre id="code_snippet_12" style="position: relative; width: 100%; border: 0px; padding: 0px; height: 3220px;" class=" ace_editor ace-tm"><textarea class="ace_text-input" wrap="off" autocorrect="off" autocapitalize="off" spellcheck="false" style="opacity: 0; height: 14px; width: 6.59781px; left: 57px; top: 0px;"></textarea><div class="ace_gutter" style="height: 3220px;"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 0px; height: 4628px; width: 53px;"><div class="ace_gutter-cell " style="height: 14px;">1</div><div class="ace_gutter-cell " style="height: 14px;">2</div><div class="ace_gutter-cell " style="height: 14px;">3</div><div class="ace_gutter-cell " style="height: 14px;">4</div><div class="ace_gutter-cell " style="height: 14px;">5</div><div class="ace_gutter-cell " style="height: 14px;">6</div><div class="ace_gutter-cell " style="height: 14px;">7</div><div class="ace_gutter-cell " style="height: 14px;">8</div><div class="ace_gutter-cell " style="height: 14px;">9</div><div class="ace_gutter-cell " style="height: 14px;">10</div><div class="ace_gutter-cell " style="height: 14px;">11</div><div class="ace_gutter-cell " style="height: 14px;">12</div><div class="ace_gutter-cell " style="height: 14px;">13</div><div class="ace_gutter-cell " style="height: 14px;">14</div><div class="ace_gutter-cell " style="height: 14px;">15</div><div class="ace_gutter-cell " style="height: 14px;">16</div><div class="ace_gutter-cell " style="height: 14px;">17</div><div class="ace_gutter-cell " style="height: 14px;">18</div><div class="ace_gutter-cell " style="height: 14px;">19</div><div class="ace_gutter-cell " style="height: 14px;">20</div><div class="ace_gutter-cell " style="height: 14px;">21</div><div class="ace_gutter-cell " style="height: 14px;">22</div><div class="ace_gutter-cell " style="height: 14px;">23</div><div class="ace_gutter-cell " style="height: 14px;">24</div><div class="ace_gutter-cell " style="height: 14px;">25</div><div class="ace_gutter-cell " style="height: 14px;">26</div><div class="ace_gutter-cell " style="height: 14px;">27</div><div class="ace_gutter-cell " style="height: 14px;">28</div><div class="ace_gutter-cell " style="height: 14px;">29</div><div class="ace_gutter-cell " style="height: 14px;">30</div><div class="ace_gutter-cell " style="height: 14px;">31</div><div class="ace_gutter-cell " style="height: 14px;">32</div><div class="ace_gutter-cell " style="height: 14px;">33</div><div class="ace_gutter-cell " style="height: 14px;">34</div><div class="ace_gutter-cell " style="height: 14px;">35</div><div class="ace_gutter-cell " style="height: 14px;">36</div><div class="ace_gutter-cell " style="height: 14px;">37</div><div class="ace_gutter-cell " style="height: 14px;">38</div><div class="ace_gutter-cell " style="height: 14px;">39</div><div class="ace_gutter-cell " style="height: 14px;">40</div><div class="ace_gutter-cell " style="height: 14px;">41</div><div class="ace_gutter-cell " style="height: 14px;">42</div><div class="ace_gutter-cell " style="height: 14px;">43</div><div class="ace_gutter-cell " style="height: 14px;">44</div><div class="ace_gutter-cell " style="height: 14px;">45</div><div class="ace_gutter-cell " style="height: 14px;">46</div><div class="ace_gutter-cell " style="height: 14px;">47</div><div class="ace_gutter-cell " style="height: 14px;">48</div><div class="ace_gutter-cell " style="height: 14px;">49</div><div class="ace_gutter-cell " style="height: 14px;">50</div><div class="ace_gutter-cell " style="height: 14px;">51</div><div class="ace_gutter-cell " style="height: 14px;">52</div><div class="ace_gutter-cell " style="height: 14px;">53</div><div class="ace_gutter-cell " style="height: 14px;">54</div><div class="ace_gutter-cell " style="height: 14px;">55</div><div class="ace_gutter-cell " style="height: 14px;">56</div><div class="ace_gutter-cell " style="height: 14px;">57</div><div class="ace_gutter-cell " style="height: 14px;">58</div><div class="ace_gutter-cell " style="height: 14px;">59</div><div class="ace_gutter-cell " style="height: 14px;">60</div><div class="ace_gutter-cell " style="height: 14px;">61</div><div class="ace_gutter-cell " style="height: 14px;">62</div><div class="ace_gutter-cell " style="height: 14px;">63</div><div class="ace_gutter-cell " style="height: 14px;">64</div><div class="ace_gutter-cell " style="height: 14px;">65</div><div class="ace_gutter-cell " style="height: 14px;">66</div><div class="ace_gutter-cell " style="height: 14px;">67</div><div class="ace_gutter-cell " style="height: 14px;">68</div><div class="ace_gutter-cell " style="height: 14px;">69</div><div class="ace_gutter-cell " style="height: 14px;">70</div><div class="ace_gutter-cell " style="height: 14px;">71</div><div class="ace_gutter-cell " style="height: 14px;">72</div><div class="ace_gutter-cell " style="height: 14px;">73</div><div class="ace_gutter-cell " style="height: 14px;">74</div><div class="ace_gutter-cell " style="height: 14px;">75</div><div class="ace_gutter-cell " style="height: 14px;">76</div><div class="ace_gutter-cell " style="height: 14px;">77</div><div class="ace_gutter-cell " style="height: 14px;">78</div><div class="ace_gutter-cell " style="height: 14px;">79</div><div class="ace_gutter-cell " style="height: 14px;">80</div><div class="ace_gutter-cell " style="height: 14px;">81</div><div class="ace_gutter-cell " style="height: 14px;">82</div><div class="ace_gutter-cell " style="height: 14px;">83</div><div class="ace_gutter-cell " style="height: 14px;">84</div><div class="ace_gutter-cell " style="height: 14px;">85</div><div class="ace_gutter-cell " style="height: 14px;">86</div><div class="ace_gutter-cell " style="height: 14px;">87</div><div class="ace_gutter-cell " style="height: 14px;">88</div><div class="ace_gutter-cell " style="height: 14px;">89</div><div class="ace_gutter-cell " style="height: 14px;">90</div><div class="ace_gutter-cell " style="height: 14px;">91</div><div class="ace_gutter-cell " style="height: 14px;">92</div><div class="ace_gutter-cell " style="height: 14px;">93</div><div class="ace_gutter-cell " style="height: 14px;">94</div><div class="ace_gutter-cell " style="height: 14px;">95</div><div class="ace_gutter-cell " style="height: 14px;">96</div><div class="ace_gutter-cell " style="height: 14px;">97</div><div class="ace_gutter-cell " style="height: 14px;">98</div><div class="ace_gutter-cell " style="height: 14px;">99</div><div class="ace_gutter-cell " style="height: 14px;">100</div><div class="ace_gutter-cell " style="height: 14px;">101</div><div class="ace_gutter-cell " style="height: 14px;">102</div><div class="ace_gutter-cell " style="height: 14px;">103</div><div class="ace_gutter-cell " style="height: 14px;">104</div><div class="ace_gutter-cell " style="height: 14px;">105</div><div class="ace_gutter-cell " style="height: 14px;">106</div><div class="ace_gutter-cell " style="height: 14px;">107</div><div class="ace_gutter-cell " style="height: 14px;">108</div><div class="ace_gutter-cell " style="height: 14px;">109</div><div class="ace_gutter-cell " style="height: 14px;">110</div><div class="ace_gutter-cell " style="height: 14px;">111</div><div class="ace_gutter-cell " style="height: 14px;">112</div><div class="ace_gutter-cell " style="height: 14px;">113</div><div class="ace_gutter-cell " style="height: 14px;">114</div><div class="ace_gutter-cell " style="height: 14px;">115</div><div class="ace_gutter-cell " style="height: 14px;">116</div><div class="ace_gutter-cell " style="height: 14px;">117</div><div class="ace_gutter-cell " style="height: 14px;">118</div><div class="ace_gutter-cell " style="height: 14px;">119</div><div class="ace_gutter-cell " style="height: 14px;">120</div><div class="ace_gutter-cell " style="height: 14px;">121</div><div class="ace_gutter-cell " style="height: 14px;">122</div><div class="ace_gutter-cell " style="height: 14px;">123</div><div class="ace_gutter-cell " style="height: 14px;">124</div><div class="ace_gutter-cell " style="height: 14px;">125</div><div class="ace_gutter-cell " style="height: 14px;">126</div><div class="ace_gutter-cell " style="height: 14px;">127</div><div class="ace_gutter-cell " style="height: 14px;">128</div><div class="ace_gutter-cell " style="height: 14px;">129</div><div class="ace_gutter-cell " style="height: 14px;">130</div><div class="ace_gutter-cell " style="height: 14px;">131</div><div class="ace_gutter-cell " style="height: 14px;">132</div><div class="ace_gutter-cell " style="height: 14px;">133</div><div class="ace_gutter-cell " style="height: 14px;">134</div><div class="ace_gutter-cell " style="height: 14px;">135</div><div class="ace_gutter-cell " style="height: 14px;">136</div><div class="ace_gutter-cell " style="height: 14px;">137</div><div class="ace_gutter-cell " style="height: 14px;">138</div><div class="ace_gutter-cell " style="height: 14px;">139</div><div class="ace_gutter-cell " style="height: 14px;">140</div><div class="ace_gutter-cell " style="height: 14px;">141</div><div class="ace_gutter-cell " style="height: 14px;">142</div><div class="ace_gutter-cell " style="height: 14px;">143</div><div class="ace_gutter-cell " style="height: 14px;">144</div><div class="ace_gutter-cell " style="height: 14px;">145</div><div class="ace_gutter-cell " style="height: 14px;">146</div><div class="ace_gutter-cell " style="height: 14px;">147</div><div class="ace_gutter-cell " style="height: 14px;">148</div><div class="ace_gutter-cell " style="height: 14px;">149</div><div class="ace_gutter-cell " style="height: 14px;">150</div><div class="ace_gutter-cell " style="height: 14px;">151</div><div class="ace_gutter-cell " style="height: 14px;">152</div><div class="ace_gutter-cell " style="height: 14px;">153</div><div class="ace_gutter-cell " style="height: 14px;">154</div><div class="ace_gutter-cell " style="height: 14px;">155</div><div class="ace_gutter-cell " style="height: 14px;">156</div><div class="ace_gutter-cell " style="height: 14px;">157</div><div class="ace_gutter-cell " style="height: 14px;">158</div><div class="ace_gutter-cell " style="height: 14px;">159</div><div class="ace_gutter-cell " style="height: 14px;">160</div><div class="ace_gutter-cell " style="height: 14px;">161</div><div class="ace_gutter-cell " style="height: 14px;">162</div><div class="ace_gutter-cell " style="height: 14px;">163</div><div class="ace_gutter-cell " style="height: 14px;">164</div><div class="ace_gutter-cell " style="height: 14px;">165</div><div class="ace_gutter-cell " style="height: 14px;">166</div><div class="ace_gutter-cell " style="height: 14px;">167</div><div class="ace_gutter-cell " style="height: 14px;">168</div><div class="ace_gutter-cell " style="height: 14px;">169</div><div class="ace_gutter-cell " style="height: 14px;">170</div><div class="ace_gutter-cell " style="height: 14px;">171</div><div class="ace_gutter-cell " style="height: 14px;">172</div><div class="ace_gutter-cell " style="height: 14px;">173</div><div class="ace_gutter-cell " style="height: 14px;">174</div><div class="ace_gutter-cell " style="height: 14px;">175</div><div class="ace_gutter-cell " style="height: 14px;">176</div><div class="ace_gutter-cell " style="height: 14px;">177</div><div class="ace_gutter-cell " style="height: 14px;">178</div><div class="ace_gutter-cell " style="height: 14px;">179</div><div class="ace_gutter-cell " style="height: 14px;">180</div><div class="ace_gutter-cell " style="height: 14px;">181</div><div class="ace_gutter-cell " style="height: 14px;">182</div><div class="ace_gutter-cell " style="height: 14px;">183</div><div class="ace_gutter-cell " style="height: 14px;">184</div><div class="ace_gutter-cell " style="height: 14px;">185</div><div class="ace_gutter-cell " style="height: 14px;">186</div><div class="ace_gutter-cell " style="height: 14px;">187</div><div class="ace_gutter-cell " style="height: 14px;">188</div><div class="ace_gutter-cell " style="height: 14px;">189</div><div class="ace_gutter-cell " style="height: 14px;">190</div><div class="ace_gutter-cell " style="height: 14px;">191</div><div class="ace_gutter-cell " style="height: 14px;">192</div><div class="ace_gutter-cell " style="height: 14px;">193</div><div class="ace_gutter-cell " style="height: 14px;">194</div><div class="ace_gutter-cell " style="height: 14px;">195</div><div class="ace_gutter-cell " style="height: 14px;">196</div><div class="ace_gutter-cell " style="height: 14px;">197</div><div class="ace_gutter-cell " style="height: 14px;">198</div><div class="ace_gutter-cell " style="height: 14px;">199</div><div class="ace_gutter-cell " style="height: 14px;">200</div><div class="ace_gutter-cell " style="height: 14px;">201</div><div class="ace_gutter-cell " style="height: 14px;">202</div><div class="ace_gutter-cell " style="height: 14px;">203</div><div class="ace_gutter-cell " style="height: 14px;">204</div><div class="ace_gutter-cell " style="height: 14px;">205</div><div class="ace_gutter-cell " style="height: 14px;">206</div><div class="ace_gutter-cell " style="height: 14px;">207</div><div class="ace_gutter-cell " style="height: 14px;">208</div><div class="ace_gutter-cell " style="height: 14px;">209</div><div class="ace_gutter-cell " style="height: 14px;">210</div><div class="ace_gutter-cell " style="height: 14px;">211</div><div class="ace_gutter-cell " style="height: 14px;">212</div><div class="ace_gutter-cell " style="height: 14px;">213</div><div class="ace_gutter-cell " style="height: 14px;">214</div><div class="ace_gutter-cell " style="height: 14px;">215</div><div class="ace_gutter-cell " style="height: 14px;">216</div><div class="ace_gutter-cell " style="height: 14px;">217</div><div class="ace_gutter-cell " style="height: 14px;">218</div><div class="ace_gutter-cell " style="height: 14px;">219</div><div class="ace_gutter-cell " style="height: 14px;">220</div><div class="ace_gutter-cell " style="height: 14px;">221</div><div class="ace_gutter-cell " style="height: 14px;">222</div><div class="ace_gutter-cell " style="height: 14px;">223</div><div class="ace_gutter-cell " style="height: 14px;">224</div><div class="ace_gutter-cell " style="height: 14px;">225</div><div class="ace_gutter-cell " style="height: 14px;">226</div><div class="ace_gutter-cell " style="height: 14px;">227</div><div class="ace_gutter-cell " style="height: 14px;">228</div><div class="ace_gutter-cell " style="height: 14px;">229</div><div class="ace_gutter-cell " style="height: 14px;">230</div></div><div class="ace_gutter-active-line" style="display: none;"></div></div><div class="ace_scroller" style="left: 53px; right: 0px; bottom: 0px; height: 3220px;"><div class="ace_content" style="margin-top: 0px; width: 707px; height: 3248px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 531.825px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line" style="height:14px">&lt;?php</div><div class="ace_line" style="height:14px">    /**</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> * Notes:</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> * - All lines with the suffix "// DEBUG" are for debugging purposes and</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> *   can safely be removed from live code.</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> * - Remember to set PAYFAST_SERVER to LIVE for production/live site</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> */</div><div class="ace_line" style="height:14px">    // General defines</div><div class="ace_line" style="height:14px">    define( 'PAYFAST_SERVER', 'TEST' );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Whether to use "sandbox" test server or live server</div><div class="ace_line" style="height:14px">    define( 'USER_AGENT', 'Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)' );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // User Agent for cURL</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">    // Messages</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Error</div><div class="ace_line" style="height:14px">    define( 'PF_ERR_AMOUNT_MISMATCH', 'Amount mismatch' );</div><div class="ace_line" style="height:14px">    define( 'PF_ERR_BAD_SOURCE_IP', 'Bad source IP address' );</div><div class="ace_line" style="height:14px">    define( 'PF_ERR_CONNECT_FAILED', 'Failed to connect to PayFast' );</div><div class="ace_line" style="height:14px">    define( 'PF_ERR_BAD_ACCESS', 'Bad access of page' );</div><div class="ace_line" style="height:14px">    define( 'PF_ERR_INVALID_SIGNATURE', 'Security signature mismatch' );</div><div class="ace_line" style="height:14px">    define( 'PF_ERR_CURL_ERROR', 'An error occurred executing cURL' );</div><div class="ace_line" style="height:14px">    define( 'PF_ERR_INVALID_DATA', 'The data received is invalid' );</div><div class="ace_line" style="height:14px">    define( 'PF_ERR_UKNOWN', 'Unkown error occurred' );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // General</div><div class="ace_line" style="height:14px">    define( 'PF_MSG_OK', 'Payment was successful' );</div><div class="ace_line" style="height:14px">    define( 'PF_MSG_FAILED', 'Payment has failed' );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">    // Notify PayFast that information has been received</div><div class="ace_line" style="height:14px">    header( 'HTTP/1.0 200 OK' );</div><div class="ace_line" style="height:14px">    flush();</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">    // Variable initialization</div><div class="ace_line" style="height:14px">    $pfError = false;</div><div class="ace_line" style="height:14px">    $pfErrMsg = '';</div><div class="ace_line" style="height:14px">    $filename = 'notify.txt'; // DEBUG</div><div class="ace_line" style="height:14px">    $output = ''; // DEBUG</div><div class="ace_line" style="height:14px">    $pfParamString = '';</div><div class="ace_line" style="height:14px">    $pfHost = ( PAYFAST_SERVER == 'LIVE' ) ?</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> 'www.payfast.co.za' : 'sandbox.payfast.co.za';</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">    //// Dump the submitted variables and calculate security signature</div><div class="ace_line" style="height:14px">    if( !$pfError )</div><div class="ace_line" style="height:14px">    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $output = "Posted Variables:\n\n"; // DEBUG</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Strip any slashes in data</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    foreach( $_POST as $key =&gt; $val )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $pfData[$key] = stripslashes( $val );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Dump the submitted variables and calculate security signature</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    foreach( $pfData as $key =&gt; $val )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>   if( $key != 'signature' )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span> $pfParamString .= $key .'='. urlencode( $val ) .'&amp;';</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Remove the last '&amp;' from the parameter string</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $pfParamString = substr( $pfParamString, 0, -1 );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $pfTempParamString = $pfParamString;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // If a passphrase has been set in the PayFast Settings, include it in the signature string.</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $passPhrase = 'XXXXX'; //You need to get this from a constant or stored in you website</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    if( !empty( $passPhrase ) )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $pfTempParamString .= '&amp;passphrase='.urlencode( $passPhrase );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $signature = md5( $pfTempParamString );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $result = ( $_POST['signature'] == $signature );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $output .= "Security Signature:\n\n"; // DEBUG</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $output .= "- posted     = ". $_POST['signature'] ."\n"; // DEBUG</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $output .= "- calculated = ". $signature ."\n"; // DEBUG</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $output .= "- result     = ". ( $result ? 'SUCCESS' : 'FAILURE' ) ."\n"; // DEBUG</div><div class="ace_line" style="height:14px">    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">    //// Verify source IP</div><div class="ace_line" style="height:14px">    if( !$pfError )</div><div class="ace_line" style="height:14px">    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $validHosts = array(</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    'www.payfast.co.za',</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    'sandbox.payfast.co.za',</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    'w1w.payfast.co.za',</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    'w2w.payfast.co.za',</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $validIps = array();</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    foreach( $validHosts as $pfHostname )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $ips = gethostbynamel( $pfHostname );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    if( $ips !== false )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $validIps = array_merge( $validIps, $ips );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Remove duplicates</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $validIps = array_unique( $validIps );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    if( !in_array( $_SERVER['REMOTE_ADDR'], $validIps ) )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $pfError = true;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $pfErrMsg = PF_ERR_BAD_SOURCE_IP;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px">    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">    //// Connect to server to validate data received</div><div class="ace_line" style="height:14px">    if( !$pfError )</div><div class="ace_line" style="height:14px">    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Use cURL (If it's available)</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    if( function_exists( 'curl_init' ) )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $output .= "\n\nUsing cURL\n\n"; // DEBUG</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Create default cURL object</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $ch = curl_init();</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Base settings</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $curlOpts = array(</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Base options</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    CURLOPT_USERAGENT =&gt; USER_AGENT, // Set user agent</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    CURLOPT_RETURNTRANSFER =&gt; true,  // Return output as string rather than outputting it</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    CURLOPT_HEADER =&gt; false,         // Don't include header in output</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    CURLOPT_SSL_VERIFYHOST =&gt; 2,</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    CURLOPT_SSL_VERIFYPEER =&gt; false,</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Standard settings</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    CURLOPT_URL =&gt; 'https://'. $pfHost . '/eng/query/validate',</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    CURLOPT_POST =&gt; true,</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    CURLOPT_POSTFIELDS =&gt; $pfParamString,</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    curl_setopt_array( $ch, $curlOpts );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Execute CURL</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $res = curl_exec( $ch );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    curl_close( $ch );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    if( $res === false )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $pfError = true;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $pfErrMsg = PF_ERR_CURL_ERROR;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Use fsockopen</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    else</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $output .= "\n\nUsing fsockopen\n\n"; // DEBUG</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Construct Header</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $header = "POST /eng/query/validate HTTP/1.0\r\n";</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $header .= "Host: ". $pfHost ."\r\n";</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $header .= "Content-Length: " . strlen( $pfParamString ) . "\r\n\r\n";</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Connect to server</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $socket = fsockopen( 'ssl://'. $pfHost, 443, $errno, $errstr, 10 );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Send command to server</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    fputs( $socket, $header . $pfParamString );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Read the response from the server</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $res = '';</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $headerDone = false;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    while( !feof( $socket ) )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $line = fgets( $socket, 1024 );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Check if we are finished reading the header yet</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    if( strcmp( $line, "\r\n" ) == 0 )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // read the header</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $headerDone = true;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // If header has been processed</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    else if( $headerDone )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Read the main response</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $res .= $line;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px">    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">    //// Get data from server</div><div class="ace_line" style="height:14px">    if( !$pfError )</div><div class="ace_line" style="height:14px">    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Parse the returned data</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $lines = explode( "\n", $res );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $output .= "\n\nValidate response from server:\n\n"; // DEBUG</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    foreach( $lines as $line ) // DEBUG</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $output .= $line ."\n"; // DEBUG</div><div class="ace_line" style="height:14px">    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">    //// Interpret the response from server</div><div class="ace_line" style="height:14px">    if( !$pfError )</div><div class="ace_line" style="height:14px">    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Get the response from PayFast (VALID or INVALID)</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $result = trim( $lines[0] );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $output .= "\nResult = ". $result; // DEBUG</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // If the transaction was valid</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    if( strcmp( $result, 'VALID' ) == 0 )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Process as required</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // If the transaction was NOT valid</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    else</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Log for investigation</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $pfError = true;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $pfErrMsg = PF_ERR_INVALID_DATA;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px">    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">    // If an error occurred</div><div class="ace_line" style="height:14px">    if( $pfError )</div><div class="ace_line" style="height:14px">    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $output .= "\n\nAn error occurred!";</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $output .= "\nError = ". $pfErrMsg;</div><div class="ace_line" style="height:14px">    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">    //// Write output to file // DEBUG</div><div class="ace_line" style="height:14px">    file_put_contents( $filename, $output ); // DEBUG</div><div class="ace_line" style="height:14px">    ?&gt;</div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 4px; top: 0px; width: 6.59781px; height: 14px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 22px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 22px; height: 3220px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 22px; left: 53px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 22px; width: 760px;"></div></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></pre><h2><span id="PDT_sample_code">PDT sample code</span></h2><pre id="code_snippet_13" style="position: relative; width: 100%; border: 0px; padding: 0px; height: 1582px;" class=" ace_editor ace-tm"><textarea class="ace_text-input" wrap="off" autocorrect="off" autocapitalize="off" spellcheck="false" style="opacity: 0; height: 14px; width: 6.59781px; left: 57px; top: 0px;"></textarea><div class="ace_gutter" style="height: 1582px;"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 0px; height: 2288px; width: 53px;"><div class="ace_gutter-cell " style="height: 14px;">1</div><div class="ace_gutter-cell " style="height: 14px;">2</div><div class="ace_gutter-cell " style="height: 14px;">3</div><div class="ace_gutter-cell " style="height: 14px;">4</div><div class="ace_gutter-cell " style="height: 14px;">5</div><div class="ace_gutter-cell " style="height: 14px;">6</div><div class="ace_gutter-cell " style="height: 14px;">7</div><div class="ace_gutter-cell " style="height: 14px;">8</div><div class="ace_gutter-cell " style="height: 14px;">9</div><div class="ace_gutter-cell " style="height: 14px;">10</div><div class="ace_gutter-cell " style="height: 14px;">11</div><div class="ace_gutter-cell " style="height: 14px;">12</div><div class="ace_gutter-cell " style="height: 14px;">13</div><div class="ace_gutter-cell " style="height: 14px;">14</div><div class="ace_gutter-cell " style="height: 14px;">15</div><div class="ace_gutter-cell " style="height: 14px;">16</div><div class="ace_gutter-cell " style="height: 14px;">17</div><div class="ace_gutter-cell " style="height: 14px;">18</div><div class="ace_gutter-cell " style="height: 14px;">19</div><div class="ace_gutter-cell " style="height: 14px;">20</div><div class="ace_gutter-cell " style="height: 14px;">21</div><div class="ace_gutter-cell " style="height: 14px;">22</div><div class="ace_gutter-cell " style="height: 14px;">23</div><div class="ace_gutter-cell " style="height: 14px;">24</div><div class="ace_gutter-cell " style="height: 14px;">25</div><div class="ace_gutter-cell " style="height: 14px;">26</div><div class="ace_gutter-cell " style="height: 14px;">27</div><div class="ace_gutter-cell " style="height: 14px;">28</div><div class="ace_gutter-cell " style="height: 14px;">29</div><div class="ace_gutter-cell " style="height: 14px;">30</div><div class="ace_gutter-cell " style="height: 14px;">31</div><div class="ace_gutter-cell " style="height: 14px;">32</div><div class="ace_gutter-cell " style="height: 14px;">33</div><div class="ace_gutter-cell " style="height: 14px;">34</div><div class="ace_gutter-cell " style="height: 14px;">35</div><div class="ace_gutter-cell " style="height: 14px;">36</div><div class="ace_gutter-cell " style="height: 14px;">37</div><div class="ace_gutter-cell " style="height: 14px;">38</div><div class="ace_gutter-cell " style="height: 14px;">39</div><div class="ace_gutter-cell " style="height: 14px;">40</div><div class="ace_gutter-cell " style="height: 14px;">41</div><div class="ace_gutter-cell " style="height: 14px;">42</div><div class="ace_gutter-cell " style="height: 14px;">43</div><div class="ace_gutter-cell " style="height: 14px;">44</div><div class="ace_gutter-cell " style="height: 14px;">45</div><div class="ace_gutter-cell " style="height: 14px;">46</div><div class="ace_gutter-cell " style="height: 14px;">47</div><div class="ace_gutter-cell " style="height: 14px;">48</div><div class="ace_gutter-cell " style="height: 14px;">49</div><div class="ace_gutter-cell " style="height: 14px;">50</div><div class="ace_gutter-cell " style="height: 14px;">51</div><div class="ace_gutter-cell " style="height: 14px;">52</div><div class="ace_gutter-cell " style="height: 14px;">53</div><div class="ace_gutter-cell " style="height: 14px;">54</div><div class="ace_gutter-cell " style="height: 14px;">55</div><div class="ace_gutter-cell " style="height: 14px;">56</div><div class="ace_gutter-cell " style="height: 14px;">57</div><div class="ace_gutter-cell " style="height: 14px;">58</div><div class="ace_gutter-cell " style="height: 14px;">59</div><div class="ace_gutter-cell " style="height: 14px;">60</div><div class="ace_gutter-cell " style="height: 14px;">61</div><div class="ace_gutter-cell " style="height: 14px;">62</div><div class="ace_gutter-cell " style="height: 14px;">63</div><div class="ace_gutter-cell " style="height: 14px;">64</div><div class="ace_gutter-cell " style="height: 14px;">65</div><div class="ace_gutter-cell " style="height: 14px;">66</div><div class="ace_gutter-cell " style="height: 14px;">67</div><div class="ace_gutter-cell " style="height: 14px;">68</div><div class="ace_gutter-cell " style="height: 14px;">69</div><div class="ace_gutter-cell " style="height: 14px;">70</div><div class="ace_gutter-cell " style="height: 14px;">71</div><div class="ace_gutter-cell " style="height: 14px;">72</div><div class="ace_gutter-cell " style="height: 14px;">73</div><div class="ace_gutter-cell " style="height: 14px;">74</div><div class="ace_gutter-cell " style="height: 14px;">75</div><div class="ace_gutter-cell " style="height: 14px;">76</div><div class="ace_gutter-cell " style="height: 14px;">77</div><div class="ace_gutter-cell " style="height: 14px;">78</div><div class="ace_gutter-cell " style="height: 14px;">79</div><div class="ace_gutter-cell " style="height: 14px;">80</div><div class="ace_gutter-cell " style="height: 14px;">81</div><div class="ace_gutter-cell " style="height: 14px;">82</div><div class="ace_gutter-cell " style="height: 14px;">83</div><div class="ace_gutter-cell " style="height: 14px;">84</div><div class="ace_gutter-cell " style="height: 14px;">85</div><div class="ace_gutter-cell " style="height: 14px;">86</div><div class="ace_gutter-cell " style="height: 14px;">87</div><div class="ace_gutter-cell " style="height: 14px;">88</div><div class="ace_gutter-cell " style="height: 14px;">89</div><div class="ace_gutter-cell " style="height: 14px;">90</div><div class="ace_gutter-cell " style="height: 14px;">91</div><div class="ace_gutter-cell " style="height: 14px;">92</div><div class="ace_gutter-cell " style="height: 14px;">93</div><div class="ace_gutter-cell " style="height: 14px;">94</div><div class="ace_gutter-cell " style="height: 14px;">95</div><div class="ace_gutter-cell " style="height: 14px;">96</div><div class="ace_gutter-cell " style="height: 14px;">97</div><div class="ace_gutter-cell " style="height: 14px;">98</div><div class="ace_gutter-cell " style="height: 14px;">99</div><div class="ace_gutter-cell " style="height: 14px;">100</div><div class="ace_gutter-cell " style="height: 14px;">101</div><div class="ace_gutter-cell " style="height: 14px;">102</div><div class="ace_gutter-cell " style="height: 14px;">103</div><div class="ace_gutter-cell " style="height: 14px;">104</div><div class="ace_gutter-cell " style="height: 14px;">105</div><div class="ace_gutter-cell " style="height: 14px;">106</div><div class="ace_gutter-cell " style="height: 14px;">107</div><div class="ace_gutter-cell " style="height: 14px;">108</div><div class="ace_gutter-cell " style="height: 14px;">109</div><div class="ace_gutter-cell " style="height: 14px;">110</div><div class="ace_gutter-cell " style="height: 14px;">111</div><div class="ace_gutter-cell " style="height: 14px;">112</div><div class="ace_gutter-cell " style="height: 14px;">113</div></div><div class="ace_gutter-active-line" style="display: none;"></div></div><div class="ace_scroller" style="left: 53px; right: 0px; bottom: 0px; height: 1582px;"><div class="ace_content" style="margin-top: 0px; width: 707px; height: 1610px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 531.825px; visibility: hidden;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line" style="height:14px">&lt;!--?php</div><div class="ace_line" style="height:14px"> define( 'SANDBOX', 1 );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">// Variable Initialization</div><div class="ace_line" style="height:14px">$pmtToken = isset( $_GET['pt'] ) ? $_GET['pt'] : null;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px">if( !empty( $pmtToken ) )</div><div class="ace_line" style="height:14px">    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Variable Initialization</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $error = false;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $authToken = '&lt;YOUR_PDT_KEY--&gt;';</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $req = 'pt='. $pmtToken .'&amp;at='. $authToken;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $data = array();</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    $host = SANDBOX ? 'sandbox.payfast.co.za' : 'www.payfast.co.za';</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    //// Connect to server</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    if( !$error )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Construct Header</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $header = "POST /eng/query/fetch HTTP/1.0\r\n";</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $header .= 'Host: '. $host ."\r\n";</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $header .= 'Content-Length: '. strlen( $req ) ."\r\n\r\n";</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Connect to server</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $socket = fsockopen( 'ssl://'. $host, 443, $errno, $errstr, 10 );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    if( !$socket )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $error = true;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    print( 'errno = '. $errno .', errstr = '. $errstr );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    //// Get data from server</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    if( !$error )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Send command to server</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    fputs( $socket, $header . $req );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Read the response from the server</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $res = '';</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $headerDone = false;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    while( !feof( $socket ) )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $line = fgets( $socket, 1024 );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Check if we are finished reading the header yet</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    if( strcmp( $line, "\r\n" ) == 0 )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // read the header</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $headerDone = true;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // If header has been processed</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    else if( $headerDone )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Read the main response</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $res .= $line;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Parse the returned data</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $lines = explode( "\n", $res );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    //// Interpret the response from server</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    if( !$error )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $result = trim( $lines[0] );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // If the transaction was successful</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    if( strcmp( $result, 'SUCCESS' ) == 0 )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Process the reponse into an associative array of data</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    for( $i = 1; $i &lt; count( $lines ); $i++ )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    list( $key, $val ) = explode( "=", $lines[$i] );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $data[urldecode( $key )] = stripslashes( urldecode( $val ) );</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // If the transaction was NOT successful</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    else if( strcmp( $result, 'FAIL' ) == 0 )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Log for investigation</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $error = true;</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    //// Process the payment</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    if( !$error )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    {</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Get the data from the new array as needed</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $nameFirst   = $data['name_first'];</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $nameLast    = $data['name_last'];</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    $amountGross = $data['amount_gross'];</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Once you have access to this data, you should perform a number of</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // checks to ensure the transaction is "correct" before processing it.</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // - Check the payment_status is Completed</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // - Check the pf_transaction_id has not already been processed</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // - Check the merchant_id is correct for your account</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // Process payment</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    // </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    }</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span> </div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    // Close socket if successfully opened</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span>    if( $socket )</div><div class="ace_line" style="height:14px"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    fclose( $socket );</div><div class="ace_line" style="height:14px">    }</div><div class="ace_line" style="height:14px">    ?&gt;</div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 4px; top: 0px; width: 6.59781px; height: 14px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 22px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 22px; height: 1582px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 22px; left: 53px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 22px; width: 760px;"></div></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></pre></section> </article> <nav id="post-entries" class="fix"><div class="nav-prev fl"><a href="https://www.payfast.co.za/documentation/faqs/" rel="prev">12. FAQs</a></div><div class="nav-next fr"><a href="https://www.payfast.co.za/documentation/sample-code-ruby-on-rails/" rel="next">Sample code: Ruby on Rails</a></div> </nav></section> <aside id="sidebar" class="col-right"><div class="primary"><div id="toc-widget-2" class="widget toc_widget"><h3>Current Page Contents</h3><ul class="toc_widget_list no_bullets"><li><a href="https://www.payfast.co.za/documentation/sample-code-php/#ITN_sample_code"><span class="toc_number toc_depth_1">1</span> ITN sample code</a></li><li><a href="https://www.payfast.co.za/documentation/sample-code-php/#PDT_sample_code"><span class="toc_number toc_depth_1">2</span> PDT sample code</a></li></ul></div><div id="nav_menu-7" class="widget widget_nav_menu"><h3>Integration Steps</h3><div class="menu-documentation-container"><ul id="menu-documentation" class="menu"><li id="menu-item-2624" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2624"><a href="https://www.payfast.co.za/documentation/getting-started/">1. Getting started</a></li><li id="menu-item-2622" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2622"><a href="https://www.payfast.co.za/documentation/confirm-page/">2. Confirm page</a></li><li id="menu-item-2629" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2629"><a href="https://www.payfast.co.za/documentation/success-page/">3. Success page</a></li><li id="menu-item-2621" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2621"><a href="https://www.payfast.co.za/documentation/cancel-page/">4. Cancel page</a></li><li id="menu-item-2625" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2625"><a href="https://www.payfast.co.za/documentation/itn/">5. ITN Callback</a></li><li id="menu-item-2626" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2626"><a href="https://www.payfast.co.za/documentation/pdt/">6. PDT (Deprecated)</a></li><li id="menu-item-2627" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2627"><a href="https://www.payfast.co.za/documentation/return-variables/">7. Return variables</a></li><li id="menu-item-4104" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-4104"><a href="https://www.payfast.co.za/documentation/recurring-billing/">8. Recurring Billing</a></li><li id="menu-item-4098" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-4098"><a href="https://www.payfast.co.za/documentation/api/">9. API</a></li><li id="menu-item-4097" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-4097"><a href="https://www.payfast.co.za/documentation/subscription-payments-api-endpoints/">9.1 Subscription Payments API Endpoints</a></li><li id="menu-item-4096" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-4096"><a href="https://www.payfast.co.za/documentation/ad-hoc-payments-api-endpoints/">9.2 Ad Hoc Payments API Endpoints</a></li><li id="menu-item-3768" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-3768"><a href="https://www.payfast.co.za/documentation/sandbox-tools/">10. Sandbox Tools</a></li><li id="menu-item-2628" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2628"><a href="https://www.payfast.co.za/documentation/testing/">11. Testing</a></li><li id="menu-item-2623" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2623"><a href="https://www.payfast.co.za/documentation/faqs/">12. FAQs</a></li></ul></div></div><div id="nav_menu-8" class="widget widget_nav_menu"><h3>Sample Code</h3><div class="menu-sample-code-container"><ul id="menu-sample-code" class="menu"><li id="menu-item-2635" class="menu-item menu-item-type-post_type menu-item-object-documentation current-menu-item menu-item-2635"><a href="https://www.payfast.co.za/documentation/sample-code-php/">Sample code: PHP</a></li><li id="menu-item-2634" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2634"><a href="https://www.payfast.co.za/documentation/sample-code-ruby-on-rails/">Sample code: Ruby on Rails</a></li><li id="menu-item-2633" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2633"><a href="https://www.payfast.co.za/documentation/sample-code-jsp/">Sample code: JSP</a></li><li id="menu-item-2630" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2630"><a href="https://www.payfast.co.za/documentation/sample-code-asp-net/">Sample code: ASP.net</a></li><li id="menu-item-2632" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2632"><a href="https://www.payfast.co.za/documentation/sample-code-c-net/">Sample code: C#.net</a></li><li id="menu-item-2631" class="menu-item menu-item-type-post_type menu-item-object-documentation menu-item-2631"><a href="https://www.payfast.co.za/documentation/sample-code-vb-net/">Sample code: VB.NET</a></li></ul></div></div><div id="nav_menu-9" class="widget widget_nav_menu"><h3>Additional Resources</h3><div class="menu-dev-extra-info-container"><ul id="menu-dev-extra-info" class="menu"><li id="menu-item-2716" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2716"><a href="https://www.payfast.co.za/support">Knowledgebase</a></li><li id="menu-item-2717" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2717"><a href="https://sandbox.payfast.co.za/">Sandbox</a></li></ul></div></div></div> </aside></div></div><div id="footer-wrapper"> <section id="footer-widgets"><div class="wrapper col-5 fix"><div class="block footer-widget-1"><div id="nav_menu-2" class="widget widget_nav_menu"><h3>PayFast</h3><div class="menu-footer-1-container"><ul id="menu-footer-1" class="menu"><li id="menu-item-392" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-392"><a href="https://www.payfast.co.za/company-information/">Company info</a></li><li id="menu-item-393" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-393"><a href="https://www.payfast.co.za/contact/">Contact us</a></li><li id="menu-item-394" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-394"><a href="https://payfast.recruiterbox.com/">Careers</a></li><li id="menu-item-397" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-397"><a href="https://www.payfast.co.za/logos-images/">Logos &amp; images</a></li><li id="menu-item-398" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-398"><a href="https://www.payfast.co.za/privacy-policy/">Privacy Policy</a></li><li id="menu-item-399" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-399"><a href="https://www.payfast.co.za/end-user-agreement/">End User Agreement</a></li><li id="menu-item-3654" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3654"><a href="https://www.payfast.co.za/email-legal-terms/">Email Legal Terms</a></li></ul></div></div></div><div class="block footer-widget-2"><div id="nav_menu-3" class="widget widget_nav_menu"><h3>Seller info</h3><div class="menu-footer-2-container"><ul id="menu-footer-2" class="menu"><li id="menu-item-400" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-400"><a href="https://www.payfast.co.za/what-is-payfast/">What is PayFast?</a></li><li id="menu-item-405" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-405"><a href="https://www.payfast.co.za/online-merchants-who-use-payfast/">Who uses PayFast?</a></li><li id="menu-item-406" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-406"><a href="https://www.payfast.co.za/payment-methods/">Payment methods</a></li><li id="menu-item-3412" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3412"><a href="https://www.payfast.co.za/account-types/">Account Types</a></li><li id="menu-item-407" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-407"><a href="https://www.payfast.co.za/security-fraud/">Security &amp; Fraud</a></li><li id="menu-item-408" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-408"><a href="https://www.payfast.co.za/fees/">Fees</a></li><li id="menu-item-409" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-409"><a href="https://www.payfast.co.za/accepting-donations/">Accepting donations</a></li><li id="menu-item-2669" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2669"><a href="https://www.payfast.co.za/integration/">Integration</a></li></ul></div></div></div><div class="block footer-widget-3"><div id="nav_menu-4" class="widget widget_nav_menu"><h3>Payment methods</h3><div class="menu-footer-3-container"><ul id="menu-footer-3" class="menu"><li id="menu-item-411" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-411"><a href="https://www.payfast.co.za/payment-methods/">Overview</a></li><li id="menu-item-412" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-412"><a href="https://www.payfast.co.za/credit-cheque-cards/">Credit &amp; cheque cards</a></li><li id="menu-item-2827" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2827"><a href="https://www.payfast.co.za/instant-eft/">Instant EFT</a></li><li id="menu-item-413" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-413"><a href="https://www.payfast.co.za/debit-cards/">Debit cards</a></li><li id="menu-item-414" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-414"><a href="https://www.payfast.co.za/bitcoin/">Bitcoin</a></li><li id="menu-item-415" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-415"><a href="https://www.payfast.co.za/mobicred/">mobicred</a></li><li id="menu-item-3600" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3600"><a href="https://www.payfast.co.za/masterpass/">Masterpass</a></li></ul></div></div></div><div class="block footer-widget-4"><div id="nav_menu-5" class="widget widget_nav_menu"><h3>Integration</h3><div class="menu-footer-4-container"><ul id="menu-footer-4" class="menu"><li id="menu-item-2647" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2647"><a href="https://www.payfast.co.za/integration/">Overview</a></li><li id="menu-item-418" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-418"><a href="https://www.payfast.co.za/shopping-carts/">Shopping carts</a></li><li id="menu-item-2670" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2670"><a href="https://www.payfast.co.za/documentation">Custom</a></li><li id="menu-item-419" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-419"><a href="https://www.payfast.co.za/html-buttons/">HTML buttons</a></li><li id="menu-item-420" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-420"><a href="https://www.payfast.co.za/request-money/">Request money</a></li></ul></div></div></div><div class="block footer-widget-5"><div id="nav_menu-6" class="widget widget_nav_menu"><h3>Community</h3><div class="menu-footer-5-container"><ul id="menu-footer-5" class="menu"><li id="menu-item-2684" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2684"><a href="https://www.payfast.co.za/blog/">The PayFast Blog</a></li><li id="menu-item-2685" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2685"><a href="https://www.payfast.co.za/contact/">Help</a></li><li id="menu-item-2448" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2448"><a href="https://www.facebook.com/payfast">Facebook</a></li><li id="menu-item-2449" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2449"><a href="https://twitter.com/payfast">Twitter</a></li><li id="menu-item-2611" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2611"><a href="http://www.linkedin.com/company/payfast">LinkedIn</a></li><li id="menu-item-2612" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2612"><a href="https://plus.google.com/+payfast/">Google+</a></li><li id="menu-item-2686" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2686"><a href="https://www.payfast.co.za/user/mailing_list">Newsletters</a></li></ul></div></div></div></div> </section> <footer id="footer"><div class="wrapper"><div id="copyright"><p>PayFast  2017. All Rights Reserved.</p></div><div id="credit"><p>Payment Service Provider. PCI-DSS Level 1 Compliant</p></div></div> </footer></div></div></div> <!--[if lt IE 9]> <script src="https://www.payfast.co.za/template_main/includes/js/respond.x69655.js"></script> <![endif]--> <script type="text/javascript">var editor_12=ace.edit('code_snippet_12');var session_12=editor_12.getSession();editor_12.setTheme('ace/theme/chrome');session_12.setMode('ace/mode/php');editor_12.setReadOnly(true);editor_12.setHighlightActiveLine(false);editor_12.setShowPrintMargin(false);editor_12.setHighlightGutterLine(false);var doc_12=session_12.getDocument();var lines=parseInt(doc_12.getLength());var line_height=20;var editor_height=lines*line_height;jQuery('#code_snippet_12').height(editor_height+'px');jQuery(window).load(function(e){var doc_12=session_12.getDocument();var lines=parseInt(doc_12.getLength());var line_height=jQuery('#code_snippet_12 .ace_line').height();var editor_height=lines*line_height;jQuery('#code_snippet_12').height(editor_height+'px');jQuery('#code_snippet_12 .ace_scroller').height(editor_height+'px');jQuery('#code_snippet_12 .ace_gutter').height(editor_height+'px');var content_height=editor_height+(line_height*2);jQuery('#code_snippet_12 .ace_content').height(content_height+'px');});</script><script type="text/javascript">var editor_13=ace.edit('code_snippet_13');var session_13=editor_13.getSession();editor_13.setTheme('ace/theme/chrome');session_13.setMode('ace/mode/php');editor_13.setReadOnly(true);editor_13.setHighlightActiveLine(false);editor_13.setShowPrintMargin(false);editor_13.setHighlightGutterLine(false);var doc_13=session_13.getDocument();var lines=parseInt(doc_13.getLength());var line_height=20;var editor_height=lines*line_height;jQuery('#code_snippet_13').height(editor_height+'px');jQuery(window).load(function(e){var doc_13=session_13.getDocument();var lines=parseInt(doc_13.getLength());var line_height=jQuery('#code_snippet_13 .ace_line').height();var editor_height=lines*line_height;jQuery('#code_snippet_13').height(editor_height+'px');jQuery('#code_snippet_13 .ace_scroller').height(editor_height+'px');jQuery('#code_snippet_13 .ace_gutter').height(editor_height+'px');var content_height=editor_height+(line_height*2);jQuery('#code_snippet_13 .ace_content').height(content_height+'px');});</script> <script type="text/javascript">jQuery(document).ready(function($){$("a[rel*=lightbox]").colorbox({transition:"fade",speed:150,width:false,height:false,innerWidth:false,innerHeight:false,initialWidth:false,initialHeight:false,maxWidth:false,maxHeight:false,scalePhotos:false,opacity:0.5,preloading:false,current:" {current}  {total}",previous:"",next:"",close:"",overlayClose:false,loop:false,scrolling:false,arrowKey:false,top:false,right:false,bottom:false,left:false});$(".lbp_secondary").colorbox({speed:300,innerWidth:"50%",innerHeight:"50%",initialWidth:"30%",initialHeight:"40%",maxWidth:"90%",maxHeight:"90%",opacity:0.8,iframe:true});});</script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/live-help.x69655.js.download"></script> <script type="text/javascript">var tocplus={"smooth_scroll":"1","smooth_scroll_offset":"110"};</script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/front.min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/wp-syntax.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/jquery.colorbox.1.5.9-min.x69655.js.download"></script> <script type="text/javascript" src="./Sample code_ PHP _ PayFast_files/wp-embed.min.x69655.js.download"></script> <img src="https://googleads.g.doubleclick.net/pagead/viewthroughconversion/1043218432/?value=0&amp;guid=ON&amp;script=0" alt="" height="1" width="1" border="0" style="border:none !important;"><div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><button type="button" id="cboxPrevious"></button><button type="button" id="cboxNext"></button><button id="cboxSlideshow"></button><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none; max-width: none;"></div></div>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","2341542662737769");fbq("track","PageView");window.google_tag_manager[google_tag_manager["GTM-KPHZ88M"].macro('gtm1')].onHtmlSuccess(2);
document.location.href.search(".appspot.");</script>


<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","1901745913432385");fbq("track","PageView");</script>


</body></html>